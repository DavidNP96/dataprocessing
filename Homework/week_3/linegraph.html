<!--
name: David Pantophlet
student number: 12466638
this program will show the development of the lowest temperatures during winter
-->


<!DOCTYPE html>
<html>
<head>
<title>myPage</title>
</head>
<body>
<h1 align="center"> daily minimum temperature in 2017</h1>
<!-- <p>My first paragraph.</p> -->
<canvas id="myChart" width="1500" height="1500"></canvas>
<script>
  var ctx = document.getElementById("myChart").getContext("2d");
  ctx.beginPath();
  ctx.moveTo(100,10);
  ctx.lineTo(100,515);
  ctx.lineTo(900,515);
  ctx.stroke();
  ctx.font = "20px Arial"
  ctx.fillText("Days", 450, 590);
  ctx.fillText("Temperature", 10, 20);

  function createTransform(domain, range){
	// domain is a two-element array of the data bounds [domain_min, domain_max]
	// range is a two-element array of the screen bounds [range_min, range_max]
	// this gives you two equations to solve:
	// range_min = alpha * domain_min + beta
	// range_max = alpha * domain_max + beta
 		// a solution would be:

    var domain_min = domain[0]
    var domain_max = domain[1]
    var range_min = range[0]
    var range_max = range[1]

    // formulas to calculate the alpha and the beta
   	var alpha = (range_max - range_min) / (domain_max - domain_min)
    var beta = range_max - alpha * domain_max

    // returns the function for the linear transformation (y= a * x + b)
    return function(x){
      return alpha * x + beta;
    }
}
  xtransform = createTransform([0,364], [100,900])
  ytransform = createTransform([-64,179], [50,450])

  var days = [];
  for (var i = 0; i < 365; i++){
    days.push(i);

  // var temp = [];
  // for (var i = )
  }
  var fileName = "data.json";
  var temperatures = [];
  var txtFile = new XMLHttpRequest();
  txtFile.onreadystatechange = function() {
      if (txtFile.readyState === 4 && txtFile.status == 200) {
          var data = JSON.parse(txtFile.responseText);
          var dates = Object.keys(data);

          var counter = 1;
          for (const element in data){
            temperature = data[element]["   TN"];
            temperatures.push(temperature);
            counter++;
          }
          console.log(temperatures);
          ctx.beginPath();
          ctx.moveTo(xtransform(days[0]), ytransform(115 - temperature[0]));

          for (var i = 1; i < 365; i++){
            ctx.lineTo(xtransform(days[i]), ytransform(115 - temperatures[i]));
            ctx.stroke();
          }
      }
  }


txtFile.open("GET", fileName);
txtFile.send();
</script>

</body>
</html>
